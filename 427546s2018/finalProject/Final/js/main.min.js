$(function(){function t(){v&&(requestAnimationFrame(t),s.rotation.x+=.001,s.rotation.y+=.001),i()}function e(){g&&(requestAnimationFrame(e),s.rotation.y+=.01),i()}function a(){var t=new THREE.TextureLoader,e=t.load("./img/front.svg"),a=t.load("./img/side.svg"),i=t.load("./img/top.svg");n=[new THREE.MeshStandardMaterial({color:16777215,map:a,depthWrite:!0,depthTest:!0,shading:THREE.SmoothShading,metalness:.2}),new THREE.MeshStandardMaterial({color:16777215,map:a,depthWrite:!0,depthTest:!0,shading:THREE.SmoothShading,metalness:.2}),new THREE.MeshStandardMaterial({color:16777215,map:i,depthWrite:!0,depthTest:!0,shading:THREE.SmoothShading,metalness:.2}),new THREE.MeshBasicMaterial({color:0}),new THREE.MeshStandardMaterial({color:16777215,map:e,depthWrite:!0,depthTest:!0,shading:THREE.SmoothShading,metalness:.2}),new THREE.MeshStandardMaterial({color:16777215,map:e,depthWrite:!0,depthTest:!0,shading:THREE.SmoothShading,metalness:.2})];var o=new THREE.MultiMaterial(n);return o}function i(){r.render(h,l)}function o(){x=parseFloat($(".3DShear-XY").val()),N.set(1,w,H,0,x,1,M,0,S,f,1,0,0,0,0,1),s.geometry.applyMatrix(N),i()}var n,s,r,l,h,d,p,c,E=0,u=0,T=0,v=1,g=0;h=new THREE.Scene,h.background=new THREE.Color(65280),l=new THREE.PerspectiveCamera(90,400/300,.5,1e4),l.position.set(0,0,-500),l.lookAt(new THREE.Vector3(0,0,0)),r=new THREE.WebGLRenderer,r.antialias=!0,r.autoClear=!0,r.shadowMap.enabled=!0,r.shadowMap.type=THREE.PCFSoftShadowMap,r.setPixelRatio(window.devicePixelRatio),r.setSize(400,300),d=$("#cav"),d.append(r.domElement);var m=new THREE.AmbientLight(16777215,.8);m.position=new THREE.Vector3(0,0,0),h.add(m),p=new THREE.PointLight(16777215,.8,1e3),p.position.set(-500,500,500),h.add(p),c=new THREE.PointLight(16777215,.8,1e3),c.position.set(500,-500,500),h.add(c);var R=new THREE.BoxGeometry(400,400,300),s=new THREE.Mesh(R,a());h.add(s);var w=0,H=0,x=0,M=0,S=0,f=0,N=new THREE.Matrix4;r.render(h,l),t(),$(".3DRotateX").change(function(){var t=parseFloat($(this).val());isNaN(t)||(E=t*(Math.PI/360),s.rotation.x=E,i())}),$(".3DRotateY").change(function(){var t=parseFloat($(this).val());isNaN(t)||(u=t*(Math.PI/360),s.rotation.y=u,i())}),$(".3DRotateZ").change(function(){var t=parseFloat($(this).val());isNaN(t)||(T=t*(Math.PI/360),s.rotation.z=T,i())}),$(".3DTranslateX").change(function(){var t=parseFloat($(this).val());isNaN(t)||(s.position.x=t,i())}),$(".3DTranslateY").change(function(){var t=parseFloat($(this).val());isNaN(t)||(s.position.y=t,i())}),$(".3DTranslateZ").change(function(){var t=parseFloat($(this).val());isNaN(t)||(s.position.z=t,i())}),$(".3DScaleX").change(function(){var t=parseFloat($(this).val());isNaN(t)||(s.scale.x=t/10,i())}),$(".3DScaleY").change(function(){var t=parseFloat($(this).val());isNaN(t)||(s.scale.y=t/10,i())}),$(".3DScaleZ").change(function(){var t=parseFloat($(this).val());isNaN(t)||(s.scale.z=t/10,i())}),$(".3DLight").change(function(){var t=parseFloat($(this).val());isNaN(t)||(p.intensity=t,c.intensity=t,i())}),$(".shCtrl").change(function(){o()}),$(".aniCtrlRotation").click(function(){$(this).hasClass("red")?($(this).removeClass("red"),$(this).addClass("blue"),$(this).text("ON"),v=1,t(),$(".popOut").slideDown(100),$(".popText").text("Ani-Rotation Button. This Button shows you what the Object(house) looks like when it is rotating.")):($(this).removeClass("blue"),$(this).addClass("red"),$(this).text("OFF"),v=0,t(),$(".popOut").slideUp(100),$(".popText").text(""))}),$(".aniCtrlCamera").click(function(){$(this).hasClass("red")?($(this).removeClass("red"),$(this).addClass("blue"),$(this).text("ON"),g=1,e(),$(".popOut").slideDown(100),$(".popText").text("Ani-Camera Button. This Button show you what the camera rotates 360 degree looks like.")):($(this).removeClass("blue"),$(this).addClass("red"),$(this).text("OFF"),g=0,e(),$(".popOut").slideUp(100),$(".popText").text(""))}),$(".popClose").click(function(){$(".popOut").slideUp(100),$(".popText").text("")})});